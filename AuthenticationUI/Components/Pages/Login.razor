@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Authentication.Cookies
@using Microsoft.AspNetCore.Authentication

@using System.Security.Claims;
@using Microsoft.AspNetCore.Components;
@using AuthenticationUI.Components.Pages;
@using Microsoft.JSInterop;

@using System.Net.Http.Headers
@using System.Net.Http.Json

@inherits LoginPage

@rendermode InteractiveServer

<link rel="stylesheet" href="Login.css">

<div class="main-container">
    <CascadingAuthenticationState>
        <AuthorizeView Context="AuthenticationContext">
            <NotAuthorized>
                <div class="forms__container">
                    <EditForm Model="@User" OnSubmit="Authenticate" FormName="LoginForm" class="form__wrapper form__wrapper-sign-in">
                        <div class="form__register form__sign-in @(IsSignUpHidden ? "" : "hidden")">
                            <div class="form__header">
                                <h3 class="form__header-title">Sign In</h3>
                                <div class="btns-container">
                                    <a href="#" class="form__header-btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="9" viewBox="0 0 320 512" fill="#999999"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M80 299.3V512H196V299.3h86.5l18-97.8H196V166.9c0-51.7 20.3-71.5 72.7-71.5c16.3 0 29.4 .4 37 1.2V7.9C291.4 4 256.4 0 236.2 0C129.3 0 80 50.5 80 159.4v42.1H14v97.8H80z" /></svg>
                                    </a>
                                    <a href="#" class="form__header-btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" viewBox="0 0 512 512" fill="#999999"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5 .3 9.1 .3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53 51.7 63.7 129.3 105.3 216.4 109.8-1.6-7.8-2.6-15.9-2.6-24 0-57.8 46.8-104.9 104.9-104.9 30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3z" /></svg>
                                    </a>
                                </div>
                            </div>
                            <div class="form__main">
                                <div class="form__input-area">
                                    <label class="input-label">Username</label>
                                    <InputText @bind-Value="@User.Name" class="input-field" placeholder="Username" />
                                </div>
                                <div class="form__input-area">
                                    <label class="input-label">Password</label>
                                    <InputText @bind-Value="@User.Password" type="password" class="input-field" placeholder="Password" />
                                </div>
                                <button type="submit" class="form__btn-submit">Sign In</button>
                            </div>
                            <div class="form__footer">
                                <div class="form__footer-checkpart">
                                    <label class="checkbox__container">
                                        Remember Me
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                <a href="#" class="a__forgot">Forgot Password</a>
                            </div>
                        </div>
                    </EditForm>

                    <EditForm Model="@Register" OnSubmit="Registration" FormName="LoginForm" class="form__wrapper form__wrapper-sign-up">
                        <div class="form__register form__sign-up @(IsSignUpHidden ? "hidden" : "")">
                            <div class="form__header">
                                <h3 class="form__header-title">Sign Up</h3>
                                <div class="btns-container">
                                    <a href="#" class="form__header-btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="9" viewBox="0 0 320 512" fill="#999999"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M80 299.3V512H196V299.3h86.5l18-97.8H196V166.9c0-51.7 20.3-71.5 72.7-71.5c16.3 0 29.4 .4 37 1.2V7.9C291.4 4 256.4 0 236.2 0C129.3 0 80 50.5 80 159.4v42.1H14v97.8H80z" /></svg>
                                    </a>
                                    <a href="#" class="form__header-btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" viewBox="0 0 512 512" fill="#999999"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5 .3 9.1 .3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53 51.7 63.7 129.3 105.3 216.4 109.8-1.6-7.8-2.6-15.9-2.6-24 0-57.8 46.8-104.9 104.9-104.9 30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3z" /></svg>
                                    </a>
                                </div>
                            </div>
                            <div class="form__main">
                                <div class="form__input-area">
                                    <label class="input-label">Username</label>
                                    <InputText @bind-Value="@Register.Username" type="text" class="input-field" placeholder="Username" />
                                </div>
                                <div class="form__input-area form__sign-up-pwd">
                                    <label for="sign-up-pwd" class="input-label">Password</label>
                                    <InputText @bind-Value="@Register.Password" type="password" class="input-field" placeholder="Password" />
                                </div>
                                <div class="form__select-container">
                                    <label for="sign-up-role" class="input-label">Role</label>
                                    <InputSelect @bind-Value="Register.Role" class="form__select">
                                        <option class="form__select-option">Administrator</option>
                                        <option class="form__select-option">User</option>
                                    </InputSelect>
                                </div>
                                <button type="submit" class="form__btn-submit">Sign Up</button>
                            </div>
                            <div class="form__footer">
                                <div class="form__footer-checkpart">
                                    <label class="checkbox__container">
                                        Remember Me
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </EditForm>

                    <div class="form-wrapper form__hider @(IsSignUpHidden ? "hide-sign-up" : "hide-sign-in")">
                        <h1 class="form__hider-title">Welcome to @(IsSignUpHidden ? "login" : "sign up")</h1>
                        <h3 class="form__hider-subtitle">@(IsSignUpHidden ? "Don't" : "Do") have an account?</h3>
                        <button class="form__hider-btn" @onclick="ChangeHiding">@(IsSignUpHidden ? "Sign Up" : "Sign In")</button>
                    </div>
                </div>
            </NotAuthorized>
            <Authorized>
                <h2 class="text-center mb-3" style="font-size:36px">Hello, @User.Name</h2>
            </Authorized>
        </AuthorizeView>
    </CascadingAuthenticationState>
</div>