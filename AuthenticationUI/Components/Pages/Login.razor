@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Authentication.Cookies
@using Microsoft.AspNetCore.Authentication

@using System.Net.Http.Headers
@using System.Net.Http.Json
@using System.Security.Claims

@inherits LoginPage

@* <CascadingAuthenticationState> *@
<AuthorizeView Context="AuthenticationContext">
    <NotAuthorized>
        <h2 class="text-center mb-3" style="font-size:36px">Login</h2>
        <div class="row">
            <div class="col-lg-4 offset-lg-4 pt-4 pb-4 border">
                <EditForm Model="@User" OnSubmit="Authenticate" FormName="LoginForm">
                    <div class="mb-3 text-center flex-column">
                        <img src="/favicon.png" style="max-height: 5rem;" />
                        <h3>LOGIN</h3>
                    </div>

                    <div class="mb-3">
                        <label>Username</label>
                        <InputText @bind-Value="User.Name" class="form-control" placeholder="Username" />
                    </div>

                    <div class="mb-3">
                        <label>Password</label>
                        <InputText @bind-Value="User.Password" class="form-control" placeholder="Password" type="password" />
                    </div>

                    <div class="mb-3 text-center">
                        <span class="text-danger">
                            @_errorMessage
                        </span>
                    </div>

                    <div class="mb-3 d-grid gap-2">
                        <button type="submit" class="btn btn-primary">
                            Login
                        </button>
                    </div>
                </EditForm>
            </div>
        </div>
    </NotAuthorized>
    <Authorized>
        <h2 class="text-center mb-3" style="font-size:36px">Hello, @User.Name</h2>
    </Authorized>
</AuthorizeView>
@* </CascadingAuthenticationState> *@